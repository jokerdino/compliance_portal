{% extends "base_generic.html" %}
{% load django_bootstrap5 %}

{% block content %}

{% include "partials/partial_task_list.html" %}
{% endblock content %}

{% block scripts %}
{{ block.super }}
<script>
    const TASK_STATUS = "{{ status }}";
    const orderColumn = TASK_STATUS === "to_be_approved" ? 6 : 5;
    new DataTable('#taskTable', {
        layout: {
            top1start: 'pageLength',
            topStart: {
                buttons: ['copy', 'csv', 'excel', 'pdf']
            },
        },
        order: [[orderColumn, 'asc']]
    });
</script>

{% if status == "to_be_approved" %}
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const selectAll = document.getElementById("select-all");

        if (!selectAll) return;

        selectAll.addEventListener("change", function () {
            const checkboxes = document.querySelectorAll(
                "tbody input[type='checkbox']"
            );

            checkboxes.forEach(cb => {
                cb.checked = selectAll.checked;
            });
        });
    });
</script>
{% endif %}
{% endblock scripts %}
